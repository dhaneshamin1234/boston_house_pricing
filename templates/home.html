<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
        body, html {
            height: 100%;
        }

        .full-height-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: cover;
            background-attachment: fixed;
        }

        .custom-card {
            max-width: 400px;
            opacity: 0.9;
        }

        /* Add margin to the button */
        .custom-button {
            margin-top: 10px;
        }

        .icon-container {
            display: flex;
            align-items: center;
            margin-left: 5px;
        }
        
    </style>
    <title>Boston House Price Prediction</title>
</head>
<body>

<div class="full-height-container" style="background-image: url(/static/city.jpg);">
    <div class="card custom-card">
        <div class="card-header" style="text-align: center; ">
            <h3>Boston House Price Predicter</h3>
        </div>
        <div class="card-body">
            <div class="card" style="margin-bottom: 10px;">
                <div class="row">
                    <div class="col-md-12">
                        <div class="icon-container">
                            <i class="fa-solid fa-circle-info"></i> <!-- Adjust the icon size as needed -->
                            <p style="font-size: x-small; margin-left: 5px; margin-top: 15px;">Hover over the input to get an idea about the attribute</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="card" style="margin-bottom: 10px;">
                <div class="row">
                    <div class="col-md-12">
                        <div class="icon-container">
                            <i class="fa-solid fa-triangle-exclamation"></i> 
                            <p style="font-size: x-small; margin-left: 5px; margin-top: 15px;">All input attributes expect numeric values</p>
                        </div>
                    </div>
                </div>
            </div> -->

            <form id="myForm">
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="CRIM" placeholder="CRIM" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="per capita crime rate by town">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="ZN" placeholder="ZN" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="proportion of residential land zoned for lots over 25,000 sq.ft.">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="INDUS" placeholder="INDUS" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="proportion of non-retail business acres per town">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="CHAS" placeholder="CHAS" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="Charles River dummy variable">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="NOX" placeholder="NOX" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="nitric oxides concentration">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="RM" placeholder="RM" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="average number of rooms per dwelling">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="Age" placeholder="Age" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="proportion of owner-occupied units built prior to 1940">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="DIS" placeholder="DIS" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="weighted distances to five Boston employment centres">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="RAD" placeholder="RAD" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="index of accessibility to radial highways">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="TAX" placeholder="TAX" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="full-value property-tax rate per $10,000">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="PTRATIO" placeholder="PTRATIO" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="pupil-teacher ratio by town">
                    </div>
                    <div class="col-md-6 mb-3">
                        <input type="number" class="form-control" name="B" placeholder="B" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="proportion of blacks by town">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-12 text-center">
                        <input type="number" class="form-control" name="LSTAT" placeholder="LSTAT" required="required" autocomplete="off" data-toggle="tooltip" data-placement="right" title="% lower status of the population">
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-primary custom-button">Predict</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title" style="text-align: center;">Model Prediction:</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                
                <!-- Modal body -->
                <div class="modal-body">
                    <!-- <p style="text-align: center;">{{prediction_text}}</p> -->
                </div>
                
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                
            </div>
        </div>
    </div>


</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // JavaScript to show the modal on form submission
    // document.getElementById('myForm').addEventListener('submit', function(event) {
    //     event.preventDefault(); // Prevent the default form submission
    //     $('#myModal').modal('show'); // Show the modal
    //     this.submit();
    // });
    document.getElementById('myForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission
        
        // Serialize the form data
        var formData = $(this).serialize();
        // console.log(formData);
        
        // Send the form data to the server via AJAX
        $.ajax({
            type: "POST",
            url: "{{ url_for('predict2') }}", // Replace with the correct Flask route
            data: formData,
            success: function(response) {
                // console.log(JSON.stringify(response));
                // Handle the response and show the modal with the server's value
                $('#myModal .modal-body').html('<p style="text-align: center;">House Predicted Price is $' + response + 'K </p>');
                $('#myModal').modal('show');
                document.getElementById("myForm").reset();
            },
            error: function() {
                // Handle any error that may occur during the AJAX request
                console.error("Error occurred during the AJAX request.");
            }
        });
    });
</script>

</body>
</html>